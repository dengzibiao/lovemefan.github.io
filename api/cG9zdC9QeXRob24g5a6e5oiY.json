{"title":"Python学习笔记 (三)  简单爬虫实战","date":"2017-08-19T14:00:00.000Z","excerpt":"<p><strong> Python学习笔记 (三)  简单爬虫实战：</strong> <excerpt in=\"\" index=\"\" |=\"\" 首页摘要=\"\"><br>Python实战 抓取网页<br>","slug":"Python 实战","tags":["学习笔记","Python","编程语言"],"updated":"2017-08-20T14:00:22.000Z","content":"<p><strong> Python学习笔记 (三)  简单爬虫实战：</strong> <excerpt in=\"\" index=\"\" |=\"\" 首页摘要=\"\"><br>Python实战 抓取网页<br><a id=\"more\"></a></excerpt></p>\n<p><the rest=\"\" of=\"\" contents=\"\" |=\"\" 余下全文=\"\"></the></p>\n<h1 id=\"Python-实战\"><a href=\"#Python-实战\" class=\"headerlink\" title=\"Python 实战\"></a>Python 实战</h1><h2 id=\"简单的静态文本抓取\"><a href=\"#简单的静态文本抓取\" class=\"headerlink\" title=\"简单的静态文本抓取\"></a>简单的静态文本抓取</h2><h3 id=\"request库命令安装\"><a href=\"#request库命令安装\" class=\"headerlink\" title=\"request库命令安装\"></a>request库命令安装</h3><p>windows下进入cmd ，定位到你Python的安装路径，我的是D:\\Program Files\\Python27\\Scripts。因为以后常用，不妨加到环境变量中，以后就不用在定位到安装路径，直接调用。<br>然后在cmd、PowerShell、XShell中输入以下命令</p>\n<ul>\n<li>Windows :  pip install request</li>\n<li>Linux :  sudo pip install request</li>\n<li>Mac OS :  sudo pip install request  <h3 id=\"抓取目标：\"><a href=\"#抓取目标：\" class=\"headerlink\" title=\"抓取目标：\"></a>抓取目标：</h3></li>\n<li><a href=\"http://my.0ff0.net/\" target=\"_blank\" rel=\"external\">http://my.0ff0.net/</a></li>\n<li><a href=\"https://get.freevpnss.me/#vpn\" target=\"_blank\" rel=\"external\">https://get.freevpnss.me/#vpn</a></li>\n</ul>\n<p>以上是两个免费的VPN网站，目标是将网站中的VPN服务器IP、用户名、密码、IPSec密钥等相关信息抓取下来以便使用。本次程序需要用到request库，如果没有安装</p>\n<h3 id=\"网站分析\"><a href=\"#网站分析\" class=\"headerlink\" title=\"网站分析\"></a>网站分析</h3><h4 id=\"第一个网站\"><a href=\"#第一个网站\" class=\"headerlink\" title=\"第一个网站\"></a>第一个网站</h4><p><img src=\"http://oskhhyaq3.bkt.clouddn.com/blog/170726/i9GiJIBJcd.png?imageslim\" alt=\"http://my.0ff0.net\"><br>查看其源码如下：<br><img src=\"http://oskhhyaq3.bkt.clouddn.com/blog/170726/fj8DBkdhgD.png?imageslim\" alt=\"my.0ff0.nety源码\"><br>第一个网站结构和源码都比较简单，直接使用Python的正则表达式匹配其字符就行<br>直接上源代码：<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># coding:utf-8</span></div><div class=\"line\"><span class=\"keyword\">import</span> requests</div><div class=\"line\"><span class=\"keyword\">import</span> re</div><div class=\"line\">html = requests.get(<span class=\"string\">\"http://my.0ff0.net/\"</span>)</div><div class=\"line\"><span class=\"comment\"># html.encoding = 'utf-8'</span></div><div class=\"line\">content = re.findall(<span class=\"string\">'&lt;div class=\"content\"&gt;(.*?)&lt;/div&gt;'</span>,html.text,re.S)[<span class=\"number\">0</span>]</div><div class=\"line\">serverip =re.findall(<span class=\"string\">'&lt;span id=\"ip\"&gt;(.*?)&lt;/span&gt;'</span>,content,re.S)</div><div class=\"line\">user =re.findall(<span class=\"string\">'&lt;span id=\"user\"&gt;(.*?)&lt;/span&gt;'</span>,content,re.S)</div><div class=\"line\">password =re.findall(<span class=\"string\">'&lt;span id=\"pw\"&gt;(.*?)\\n&lt;/span&gt;'</span>,content,re.S)</div><div class=\"line\">secret =re.findall(<span class=\"string\">'&lt;span id=\"secret\"&gt;(.*?)&lt;/span&gt;'</span>,content,re.S)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># print html.text</span></div><div class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">\"服务器地址: %s \"</span>%str(serverip[<span class=\"number\">0</span>])</div><div class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">\"用户名: %s\"</span>%str(user[<span class=\"number\">0</span>])</div><div class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">\"密码: %s\"</span>%str(password[<span class=\"number\">0</span>])</div><div class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">\"IPSec密钥: %s\"</span>%str(secret[<span class=\"number\">0</span>])</div><div class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">\"连接方式：PPTP和Cisco IPSec(IKEv1)\"</span></div></pre></td></tr></table></figure></p>\n<p>运行结果：<br><img src=\"http://oskhhyaq3.bkt.clouddn.com/blog/170726/maJClL2Ha4.png?imageslim\" alt=\"运行结果\"></p>\n<h4 id=\"第二个网站\"><a href=\"#第二个网站\" class=\"headerlink\" title=\"第二个网站\"></a>第二个网站</h4><p><img src=\"http://oskhhyaq3.bkt.clouddn.com/blog/170820/hkebHGd2L7.png?imageslim\" alt=\"freeVPN\"><br><strong>F12查看源码,同样用正则表达式吧需要的字符匹配出来.</strong><br><img src=\"http://oskhhyaq3.bkt.clouddn.com/blog/170820/L0g8L9L5C5.png?imageslim\" alt=\"mark\"></p>\n<h3 id=\"源码\"><a href=\"#源码\" class=\"headerlink\" title=\"源码\"></a>源码</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># coding:utf-8</span></div><div class=\"line\"><span class=\"keyword\">from</span> encodings <span class=\"keyword\">import</span> gb18030</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> requests</div><div class=\"line\"><span class=\"keyword\">import</span> re</div><div class=\"line\">html = requests.get(<span class=\"string\">\"http://jn9.org/indexcn.html\"</span>)</div><div class=\"line\">html.encoding = <span class=\"string\">'utf-8'</span></div><div class=\"line\"></div><div class=\"line\">target = re.findall(<span class=\"string\">'&lt;div class=\"panel-heading\"&gt;(.*?)&lt;span class=\"label label-success\"&gt;Active&lt;/span&gt;&lt;/p&gt;.*?&lt;/div&gt;.*?&lt;/div&gt;.*?&lt;/div&gt;&lt;!-- /.col-sm-4 --&gt;'</span>,html.text,re.S)</div><div class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(target.__len__()):</div><div class=\"line\">    adress = re.findall(<span class=\"string\">'&lt;h2 class=\"panel-title\"&gt;(.*?)&lt;/h2&gt;'</span>,target[i],re.S)</div><div class=\"line\">    contend = re.findall(<span class=\"string\">'&lt;p&gt;(.*?)&lt;/p&gt;'</span>,target[i],re.S)</div><div class=\"line\">    <span class=\"keyword\">if</span> adress:</div><div class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">\"地区:\"</span>,adress[<span class=\"number\">0</span>]</div><div class=\"line\">    <span class=\"keyword\">for</span> each <span class=\"keyword\">in</span> contend:</div><div class=\"line\">        result = re.sub(<span class=\"string\">'&lt;span class=\"hidden\"&gt;(.*?)&lt;/span&gt;'</span>, <span class=\"string\">''</span>,each)</div><div class=\"line\">        <span class=\"keyword\">print</span> result</div><div class=\"line\">    <span class=\"keyword\">print</span> <span class=\"string\">\"\\n\\n\"</span></div></pre></td></tr></table></figure>\n<p>运行结果如下:<br><img src=\"http://oskhhyaq3.bkt.clouddn.com/blog/170820/49jGcfChGJ.png?imageslim\" alt=\"效果图\"><br><code>好了,翻个墙出去玩耍了.</code></p>\n","prev":{"title":"查四六级准考证号的一种方法","slug":"四六级查询准考证方法"},"next":{"title":"数学建模论文格式分析","slug":"论文格式分析鉴赏"},"link":"/post/Python 实战/index.html  2017/08/19","toc":[{"title":"Python 实战","id":"Python-实战","index":"1","children":[{"title":"简单的静态文本抓取","id":"简单的静态文本抓取","index":"1.1","children":[{"title":"request库命令安装","id":"request库命令安装","index":"1.1.1"},{"title":"抓取目标：","id":"抓取目标：","index":"1.1.2"},{"title":"网站分析","id":"网站分析","index":"1.1.3"},{"title":"源码","id":"源码","index":"1.1.4"}]}]}]}