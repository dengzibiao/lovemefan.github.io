{"title":"Android学习笔记 (一)   按钮事件处理的五种方法","date":"2017-09-12T05:58:00.000Z","excerpt":"<p><strong> Android学习笔记 (一)   按钮事件处理的五种方法：</strong> <excerpt in=\"\" index=\"\" |=\"\" 首页摘要=\"\"><br> 收集了五种处理按钮事件处理的方法<br>","slug":"Android 按钮事件的五种处理方法","tags":["Android","APP开发","学习笔记"],"updated":"2017-09-12T07:50:43.134Z","content":"<p><strong> Android学习笔记 (一)   按钮事件处理的五种方法：</strong> <excerpt in=\"\" index=\"\" |=\"\" 首页摘要=\"\"><br> 收集了五种处理按钮事件处理的方法<br><a id=\"more\"></a></excerpt></p>\n<p><the rest=\"\" of=\"\" contents=\"\" |=\"\" 余下全文=\"\"></the></p>\n<h1 id=\"Android-按钮事件的五种处理方法\"><a href=\"#Android-按钮事件的五种处理方法\" class=\"headerlink\" title=\"Android 按钮事件的五种处理方法\"></a>Android 按钮事件的五种处理方法</h1><p>这里用一个小例子来说明:<br>首先在新建的工程的activity_main.xml中添加一个Button和一个TextView.<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">android.support.constraint.ConstraintLayout</span></span></div><div class=\"line\">    <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">\"http://schemas.android.com/tools\"</span></div><div class=\"line\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">tools:context</span>=<span class=\"string\">\"com.lovemefan.myapplication3.MainActivity\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/tv1\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:text</span>=<span class=\"string\">\"Hello World!\"</span></div><div class=\"line\">        <span class=\"attr\">app:layout_constraintBottom_toBottomOf</span>=<span class=\"string\">\"parent\"</span></div><div class=\"line\">        <span class=\"attr\">app:layout_constraintLeft_toLeftOf</span>=<span class=\"string\">\"parent\"</span></div><div class=\"line\">        <span class=\"attr\">app:layout_constraintRight_toRightOf</span>=<span class=\"string\">\"parent\"</span></div><div class=\"line\">        <span class=\"attr\">app:layout_constraintTop_toTopOf</span>=<span class=\"string\">\"parent\"</span> /&gt;</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Button</span></span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/bt1\"</span></div><div class=\"line\">        <span class=\"attr\">android:text</span>=<span class=\"string\">\"click\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span> /&gt;</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">android.support.constraint.ConstraintLayout</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"1-使用匿名内部类\"><a href=\"#1-使用匿名内部类\" class=\"headerlink\" title=\"1.使用匿名内部类\"></a><code>1.使用匿名内部类</code></h2><p>接下来在MainActivity.java文件中如下<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\">        Button bt = (Button) findViewById(R.id.bt1);</div><div class=\"line\">       bt.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View view)</span> </span>&#123;</div><div class=\"line\">                TextView tv = (TextView) findViewById(R.id.tv1);</div><div class=\"line\">                tv.setText(<span class=\"string\">\"hello android\"</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);<span class=\"comment\">//内部匿名类实现按键处理</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"2-使用自定义单击事件监听类\"><a href=\"#2-使用自定义单击事件监听类\" class=\"headerlink\" title=\"2.使用自定义单击事件监听类\"></a><code>2.使用自定义单击事件监听类</code></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\">        Button bt = (Button) findViewById(R.id.bt1);</div><div class=\"line\">        bt.setOnClickListener(<span class=\"keyword\">new</span> myButtonClick());<span class=\"comment\">//自定义事件监听类实现按钮事件处理</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">myButtonClick</span> <span class=\"keyword\">implements</span> <span class=\"title\">View</span>.<span class=\"title\">OnClickListener</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">       <span class=\"meta\">@Override</span></div><div class=\"line\">       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View view)</span> </span>&#123;</div><div class=\"line\">           TextView tv = (TextView) findViewById(R.id.tv1);</div><div class=\"line\">           tv.setText(<span class=\"string\">\"hello android\"</span>);</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"3-使用lambda语法实现按钮处理\"><a href=\"#3-使用lambda语法实现按钮处理\" class=\"headerlink\" title=\"3.使用lambda语法实现按钮处理\"></a><code>3.使用lambda语法实现按钮处理</code></h2><p>首先确保环境支持<code>lambda</code>语法,即JDK在1.8及以上.<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\">        Button bt = (Button) findViewById(R.id.bt1);</div><div class=\"line\">        bt.setOnClickListener((view)-&gt;&#123;</div><div class=\"line\">            TextView tv = (TextView) findViewById(R.id.tv1);</div><div class=\"line\">            tv.setText(<span class=\"string\">\"hello android\"</span>);</div><div class=\"line\">        &#125;);<span class=\"comment\">//lambda语法实现按钮处理事件</span></div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>如果在Android Studio 下报错:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Error:Jack is required to support java 8 language features. Either enable Jack or remove sourceCompatibility JavaVersion.VERSION_1_8.</div></pre></td></tr></table></figure></p>\n<p>请在<code>build.gradle(Module:app)</code>文件加入以下代码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"># 在 build.gradle 文件中加入如下代码</div><div class=\"line\">defaultConfig &#123;</div><div class=\"line\">    ...</div><div class=\"line\">    jackOptions &#123;</div><div class=\"line\">        enabled true</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">compileOptions &#123;</div><div class=\"line\">    sourceCompatibility org.gradle.api.JavaVersion.VERSION_1_8</div><div class=\"line\">    targetCompatibility org.gradle.api.JavaVersion.VERSION_1_8</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"4-Activity继承View-OnClickListener\"><a href=\"#4-Activity继承View-OnClickListener\" class=\"headerlink\" title=\"4.Activity继承View.OnClickListener\"></a><code>4.Activity继承View.OnClickListener</code></h2><p>由Activity实现OnClick(View view)方法，在OnClick(View view)方法中用switch-case对不同id代表的button进行相应的处理：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> <span class=\"keyword\">implements</span> <span class=\"title\">View</span>.<span class=\"title\">OnClickListener</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\">        Button bt = (Button) findViewById(R.id.bt1);</div><div class=\"line\">        bt.setOnClickListener((view)-&gt;&#123;</div><div class=\"line\">            TextView tv = (TextView) findViewById(R.id.tv1);</div><div class=\"line\">            tv.setText(<span class=\"string\">\"hello android\"</span>);</div><div class=\"line\">        &#125;);<span class=\"comment\">//lambda语法实现按钮处理事件</span></div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View view)</span> </span>&#123;  </div><div class=\"line\">  </div><div class=\"line\">        <span class=\"keyword\">switch</span> (view.getId())&#123;  </div><div class=\"line\">            <span class=\"keyword\">case</span> R.id.bt:  </div><div class=\"line\">                TextView tv = (TextView) findViewById(R.id.tv1);</div><div class=\"line\">\t            tv.setText(<span class=\"string\">\"hello android\"</span>);  </div><div class=\"line\">            <span class=\"keyword\">break</span>;  </div><div class=\"line\">            <span class=\"keyword\">default</span>:  </div><div class=\"line\">            <span class=\"keyword\">break</span>;  </div><div class=\"line\">        &#125;  </div><div class=\"line\">    &#125;  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>这个方法适合多个按钮</p>\n<h2 id=\"5-在XML文件指定按钮的onClick属性\"><a href=\"#5-在XML文件指定按钮的onClick属性\" class=\"headerlink\" title=\"5.在XML文件指定按钮的onClick属性\"></a><code>5.在XML文件指定按钮的onClick属性</code></h2><p>在XML文件中显示指定按钮的onClick属性，这样点击按钮时会利用反射的方式调用对应Activity中的click()方法：<br>在我之前学习的Windows 10 <code>UWP</code> 的app开发中都是用的这种方法.<br>UWP也是类似的在相应的XAML代码中设置click属性即可,并且Visual Studio会自动为其添加相应方法.<strong>\\(▔＾▔)/ 微软大法好</strong><br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Button</span></span></div><div class=\"line\">        <span class=\"attr\">android:onClick</span>=<span class=\"string\">\"sayHelloAndroid\"</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/bt1\"</span></div><div class=\"line\">        <span class=\"attr\">android:text</span>=<span class=\"string\">\"click\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span> /&gt;</div></pre></td></tr></table></figure></p>\n<p>笔者经过百度了后,发现Android Studio 有快捷键来生成click相应的方法:点击onclick的属性值,然后按Alt+Enter<br><img src=\"http://oskhhyaq3.bkt.clouddn.com/blog/170912/5jeDm9Klik.png?imageslim\" alt=\"生成方法\"><br>然后就生成了相应方法,这样可以避免手动写方法时不小心拼错单词了.<br><img src=\"http://oskhhyaq3.bkt.clouddn.com/blog/170912/547A3AcCIg.png?imageslim\" alt=\"mark\"></p>\n<p>我个人比较喜欢用第五种方法.界面与后台代码可以完全分开,代码量也少.不过反射最大的缺点就是影响性能和效率.</p>\n","prev":{"title":"Python学习笔记 (四)  安装scrapy框架","slug":"scrapy框架"},"next":{"title":"查四六级准考证号的一种方法","slug":"四六级查询准考证方法"},"link":"/2017/09/12","toc":[{"title":"Android 按钮事件的五种处理方法","id":"Android-按钮事件的五种处理方法","index":"1","children":[{"title":"<code>1.使用匿名内部类</code>","id":"1-使用匿名内部类","index":"1.1"},{"title":"<code>2.使用自定义单击事件监听类</code>","id":"2-使用自定义单击事件监听类","index":"1.2"},{"title":"<code>3.使用lambda语法实现按钮处理</code>","id":"3-使用lambda语法实现按钮处理","index":"1.3"},{"title":"<code>4.Activity继承View.OnClickListener</code>","id":"4-Activity继承View-OnClickListener","index":"1.4"},{"title":"<code>5.在XML文件指定按钮的onClick属性</code>","id":"5-在XML文件指定按钮的onClick属性","index":"1.5"}]}]}